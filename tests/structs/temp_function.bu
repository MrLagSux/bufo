//! THIS IS A TEST PROGRAM
//! COMPILER
//! FAILURE
//! CODE: 1
//! ERROR:
//! Attempted to mutate temporary value.
//! Temporary values are only valid for the duration of the statement they are declared in.
//! If you want to mutate a value, declare it as a variable instead.

struct Foo {
    a: i32;
}

func doStuffWithFoo(mut f: Foo) -> Foo {
    // mutable param ^
    f.a = 420;
    return f;
}

func main() -> i32 {
    mut f: Foo = Foo {
        a: 5
    };
    let f2: Foo = doStuffWithFoo(doStuffWithFoo(f));
    // return value of inner function --^
    // call is immutable unless assigned
    if (f2.a != 420) return f2.a;
}